<%- include('../includes/head.ejs') %>
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <main class="my-auto p-5" id="content">
                <div class="text-center py-5">
                    <h1 class="display-1">Error 500</h1>
                    <h2>Unexpected Error. Please Try Again.</h2>
                    <% if(isProduction) { %>
                        <p><em><%= error.message %></em></p>
                    <% } %>
                </div>
            </main>
        </div>
    </div>
    <% if(!isProduction) { %>
        <div class="row">
            <div class="col-12">
                <h3><%= error.name %></h3>
                <p><%= error.message %></p>
                <% if(error.stack) { %>
                    <% const arrStack = error.stack.split('\n') %>
                    <% if(arrStack.length) { %>
                        <div>
                            <table class="table table-striped table-sm">
                                <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Line Detail</th>
                                </tr>
                                </thead>
                                <tbody>
                                <% for (let i = 0; i < arrStack.length; i++) { %>
                                    <tr>
                                        <th scope="row"><%= i + 1 %></th>
                                        <td style="<%= (i > 0) ? "padding-left:30px" : "" %>">
                                            <%= arrStack[i] %>
                                        </td>
                                    </tr>
                                <% } %>
                                </tbody>
                            </table>
                        </div>
                    <% } %>
                <% } %>
            </div>
        </div>
    <% } %>
</div>
<%- include('../includes/end.ejs') %>